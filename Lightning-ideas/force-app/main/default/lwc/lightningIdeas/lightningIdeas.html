<!-- sldsValidatorIgnore -->
<template>
    <lightning-card icon-name="utility:light_bulb">
        <h1 class="slds-page-header__title slds-align-middle slds-truncate slds-text-align_center" slot="title">
            Ideas
        </h1>

        <div class="slds-einstein-header" slot="heading"></div>
        
        <lightning-button label="New Idea" onclick={createNewIdea} slot="actions"></lightning-button>

        <lightning-layout>
            
            <lightning-layout-item padding="around-small" size="3">      
                <lightning-accordion class="example-accordion" onsectiontoggle={handleToggleSection} active-section-name="B">
                    <lightning-accordion-section name="Zones" label="Zones">
                        <template for:each={zones} for:item="zone">
                            <lightning-input type="checkbox" label={zone} key={zone} checked> </lightning-input>
                        </template>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Status" label="Status">
                        <template for:each={statuses} for:item="status">
                            <lightning-input type="checkbox" label={status} key={status} checked> </lightning-input>
                        </template>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Category" label="Category">
                        <template for:each={categories} for:item="category">
                            <lightning-input type="checkbox" label={category} key={category} checked> </lightning-input>
                        </template>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Sort" label="Sort">
                        Sort
                    </lightning-accordion-section>
                </lightning-accordion>
            </lightning-layout-item>

            <lightning-layout-item padding="around-small" size="9">
                <template if:true={ideas}>
                    <template for:each={ideas} for:item="idea">
                        <lightning-card icon-name="standard:skill" key={idea.Id} class="slds-box">
                            <div slot="title">
                                <a href="https://sarkiesparkingspace-dev-ed.lightning.force.com/lightning/n/Lightning_Ideas?c__id=">{idea.Title}</a>
                            </div>
                            <div slot="actions">
                                <lightning-button-icon data-id={idea.Id} data-vote="Up" icon-name="utility:like" size="medium" alternative-text="Up Vote" onclick={voteOnIdea}></lightning-button-icon>
                                {idea.VoteTotal} Points
                                <lightning-button-icon data-id={idea.Id} data-vote="Down" icon-name="utility:dislike" size="medium" alternative-text="Down Up" onclick={voteOnIdea}></lightning-button-icon>
                                <br />
                                <lightning-badge label={idea.Status}></lightning-badge>
                            </div>
                            <div class="slds-m-around_medium">
                                {idea.Body}
                            </div>
                            <div slot="footer">
                                <h6>{idea.NumComments} Comment(s)</h6>
                                <template if:true={showNewIdeaForm}>
                                    <lightning-button data-id={idea.Id} label="Delete Idea" variant="border-filled" onclick={deleteIdea}></lightning-button>
                                </template>
                            </div>
                        </lightning-card>
                    </template>
                </template>
            </lightning-layout-item>

        </lightning-layout>

        <template if:true={showNewIdeaForm}>
            <c-new-lightning-idea onclosenewmodal={cancelNewIdea} onnewideacreated={newIdeaCreated}></c-new-lightning-idea>
        </template>

        <template if:true={error}>
            <b>Something went wrong creating Idea :-/</b>
        </template>

    </lightning-card>
</template>